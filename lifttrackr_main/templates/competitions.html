{% extends 'base.html' %}

{% block title %}Competitions{% endblock %}

{% block content %}
{% if user.is_authenticated %}
{% csrf_token %}

<div class="competition_container"> 
    <h2>Competitions</h2>
    <button v-if="competition_builder===false" @click="new_competition_time()">New Competition</button>
    <div class="competition_builder" v-if="competition_builder===true">
        <input type="text" v-model="session_name" placeholder="Competition Name"/>
        <br>
        <textarea v-model="search_text" placeholder="Ground Rules"></textarea>
        <br>
        <p>Start Date:</p>
        <input type="date" v-model="start_date" placeholder="Start Date"/>
        
        <p>Stop Date: </p>
        <input type="date" v-model="stop_date" placeholder="Stop Date"/>
        <br>
        <button @click="competition_builder=false">Cancel</button>
        <button @click="start_competition()">Save Competition</button>
    </div>
    <div class="competitions" v-for="comp in reversed_competitions">
        <h2><a :href="`/users/competition_detail/${comp.id}/`">[[comp.title]]</a></h2>
        
       
        <p>Start: [[comp.start_date]]</p>
        <p>Start: [[comp.stop_date]]</p>
       
        <h4>Scoring:</h4>
        <div v-for="exercise in comp.comp_exercise_details">
            <h5>[[exercise.exercise_detail.name]] : [[exercise.exercise_points]] pts.</h5>
        </div>
    
        <h4>Competitors:</h4>
        <div v-for="competitor in comp.score_details">
            <p>[[competitor.user_details.username]]</p>
        </div>
        
        
    </div>
</div>

{% else %}
<h1>It doesn't look like you are currently logged in</h1>
{% endif %}
{% endblock %}